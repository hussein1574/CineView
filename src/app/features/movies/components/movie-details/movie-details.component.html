@if(movie(); as loadedMovie){
<main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <section
    class="relative rounded-lg overflow-hidden -mx-4 sm:-mx-6 lg:-mx-8 h-[50vh] min-h-[350px]"
  >
    <div
      class="absolute inset-0 bg-cover bg-center"
      style="background-image: url('{{ imageBaseUrl }}/{{ loadedMovie.backdrop_path }}')"
    ></div>
    <div class="absolute inset-0 bg-gradient-to-t from-[#121212] via-transparent"></div>
  </section>
  <section class="relative -mt-32 z-10">
    <div class="flex flex-col md:flex-row items-end space-y-4 md:space-y-0 md:space-x-8">
      <img
        src="{{ imageBaseUrl }}/{{ loadedMovie.poster_path }}"
        alt="Movie Poster"
        class="w-64 rounded-lg shadow-2xl"
      />
      <div class="flex-1 pb-4">
        <h1 id="movie-title-details" class="text-4xl md:text-5xl font-bold text-white">
          {{ loadedMovie.title }}
        </h1>
        <div class="flex items-center space-x-4 text-gray-400 mt-2">
          <span>{{ loadedMovie.release_date | date : 'yyyy' }}</span
          ><span>•</span><span>{{ loadedMovie.runtime }} min</span><span>•</span
          ><span>{{ movieGenres() }}</span>
        </div>
      </div>
    </div>
  </section>
  <section class="mt-8">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <div class="lg:col-span-2">
        <h2 class="text-2xl font-bold text-white mb-4">Synopsis</h2>
        <p class="text-gray-300 leading-relaxed">
          {{ loadedMovie.overview }}
        </p>

        <!-- Gemini AI Summary Feature -->
        <div class="mt-6 p-4 bg-gray-800/50 rounded-lg">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-bold text-teal-400">Gemini AI Summary</h3>
            <button
              id="get-ai-summary"
              class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-full text-sm flex items-center space-x-2 cursor-pointer"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="w-4 h-4"
              >
                <path
                  d="M12 3c-1.8 0-3.6.3-5.4.9a10 10 0 0 0-6.5 14.1c.5.8 1.1 1.6 1.8 2.2s1.4 1.3 2.2 1.8c5.2 2.7 11.5 2.7 16.7 0 .8-.5 1.6-1.1 2.2-1.8s1.3-1.4 1.8-2.2c2.7-5.2 2.7-11.5 0-16.7-1.8-.6-3.6-.9-5.4-.9z"
                />
                <path d="m9.5 14.5 1.8 1.8 3.2-3.2" />
              </svg>
              <span>Generate</span>
            </button>
          </div>
          <div id="ai-summary-container" class="mt-4 text-gray-400">
            Click "Generate" to get an AI-powered summary.
          </div>
          <div id="ai-summary-loader" class="hidden mt-4 flex justify-center">
            <div class="loader"></div>
          </div>
        </div>
      </div>
      <div>
        <h2 class="text-2xl font-bold text-white mb-4">Details</h2>
        <div class="space-y-2 text-gray-300">
          <p>
            <strong class="font-semibold text-white">Released:</strong>
            {{ loadedMovie.release_date | date : 'yyyy-MM-dd' }}
          </p>
          <p>
            <strong class="font-semibold text-white">Rating:</strong>
            {{ loadedMovie.vote_average }} / 10
          </p>
        </div>
      </div>
    </div>
  </section>
</main>
} @else {
<h1>Test</h1>
}
